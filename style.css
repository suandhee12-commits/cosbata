const carousel = document.querySelector('.carousel');
const cells = carousel.querySelectorAll('.carousel__cell');
const cellCount = cells.length;

// 이미지 개수에 맞춰 각도와 반지름 계산
const theta = 360 / cellCount;
const cellWidth = carousel.offsetWidth;
// 이미지 사이의 간격을 조절하려면 아래 1.2 숫자를 0.8 ~ 2.0 사이로 조절해보세요.
const radius = Math.round((cellWidth / 2) / Math.tan(Math.PI / cellCount)) * 1.5;

let selectedIndex = 0;

function setupCarousel() {
    cells.forEach((cell, i) => {
        const cellAngle = theta * i;
        // 각 이미지를 원형으로 배치
        cell.style.transform = `rotateY(${cellAngle}deg) translateZ(${radius}px)`;
    });
    
    // 초기 위치 설정
    updateRotation();
}

function updateRotation() {
    const angle = theta * selectedIndex * -1;
    // 카루셀 전체를 회전시킴
    carousel.style.transform = `translateZ(-${radius}px) rotateY(${angle}deg)`;
}

// 마우스 휠 이벤트
window.addEventListener('wheel', (e) => {
    if (e.deltaY > 0) {
        selectedIndex++;
    } else {
        selectedIndex--;
    }
    updateRotation();
});

// 터치나 드래그 기능을 추가하고 싶을 때를 대비해 초기화 실행
setupCarousel();
